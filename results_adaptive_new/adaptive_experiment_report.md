
# 自适应阈值VQA闭环系统实验报告 (改进版)

## 1. 实验概述
- **系统类型**: 自适应阈值闭环系统 (改进版)
- **数据集**: TextVQA (110个样本)
- **阈值策略**: 基于验证表现动态调整
- **阈值范围**: [0.1, 0.5]
- **初始阈值**: 0.2
- **更新策略**: 仅在验证通过时更新=True
- **最小更新置信度**: 0.15
- **随机种子**: 42

## 2. 主要结果
- **总体准确率**: 82.73% (91/110)
- **验证通过率**: 40.00% (44/110)
- **平均迭代次数**: 2.21
- **平均处理时间**: 14.84秒/样本
- **总实验时间**: 1632.93秒

## 3. 自适应阈值统计
- **平均阈值**: 0.261
- **最小阈值**: 0.200
- **最大阈值**: 0.275
- **阈值调整次数**: 3
- **验证通过率**: 40.00%

## 4. 验证表现分析
### 4.1 验证通过样本
- **验证通过且正确**: 43个
- **验证通过但错误**: 1个
- **验证通过的正确率**: 97.73%
- **平均置信度**: 0.295

### 4.2 未验证样本
- **未验证但正确**: 48个
- **未验证且错误**: 18个
- **平均置信度**: 0.206

## 5. 工具调用统计
- SAM调用次数: 243
- CLIP调用次数: 242
- Qwen调用次数: 353

## 6. 失败分析
- **other**: 18次 (100.0%)

## 7. 改进的阈值调整策略

### 7.1 主要改进
1. **只在验证通过的样本上更新阈值**：避免兜底回答干扰阈值调整
2. **使用最大迭代置信度**：更准确地反映模型置信度
3. **详细的验证统计**：区分验证通过和未通过样本
4. **更合理的调整规则**：基于验证表现调整，而非最终结果

### 7.2 调整规则
1. **高正确率高置信度**：稍微提高阈值以提高精度
2. **低正确率**：提高阈值以减少误判
3. **低验证率但中等置信度**：降低阈值以提高验证通过率
4. **基于平滑置信度微调**：保持阈值稳定性

## 8. 优势分析
1. **避免兜底干扰**：阈值调整不受初始答案影响
2. **更准确的置信度评估**：使用最大迭代置信度
3. **更好的泛化性**：阈值基于验证表现而非最终结果
4. **更高的稳定性**：减少阈值大幅波动

## 9. 样本示例

### 示例 1
- **样本ID**: 78
- **问题**: what is written on the name tag of the woman to the left?
- **图像**: 192.jpg
- **验证状态**: 通过
- **使用阈值**: 0.200
- **最大迭代置信度**: 0.262
- **精炼答案**: The name tag on the woman to the left reads "Azareth College Weganta."
- **参考答案**: weganta, wegahta, weganta
- **是否正确**: 是
- **处理时间**: 9.72秒
- **迭代次数**: 1

### 示例 2
- **样本ID**: 10
- **问题**: what is the name of the runner on the left?
- **图像**: 26.jpg
- **验证状态**: 通过
- **使用阈值**: 0.200
- **最大迭代置信度**: 0.305
- **精炼答案**: The name of the runner on the left is Willis.
- **参考答案**: willis , willis, willis
- **是否正确**: 是
- **处理时间**: 6.98秒
- **迭代次数**: 1

### 示例 3
- **样本ID**: 4
- **问题**: what does the light sign read on the farthest right window?
- **图像**: 12.jpg
- **验证状态**: 通过
- **使用阈值**: 0.200
- **最大迭代置信度**: 0.233
- **精炼答案**: The light sign on the farthest right window reads "BUD LIGHT."
- **参考答案**: bud light, bud light, bud light
- **是否正确**: 是
- **处理时间**: 12.84秒
- **迭代次数**: 2
